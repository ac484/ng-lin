#!/bin/sh
. "$(dirname "$0")/_/husky.sh"
export NODE_OPTIONS="--max-old-space-size=4096"

echo "ğŸš€ åŸ·è¡Œ Pre-push å®Œæ•´æª¢æŸ¥..."

# 1. Lint æª¢æŸ¥
echo "ğŸ“ åŸ·è¡Œ Lint..."
yarn lint || exit 1

# 2. åŸ·è¡Œæ¸¬è©¦
echo "ğŸ§ª åŸ·è¡Œæ¸¬è©¦..."
yarn test --watch=false --browsers=ChromeHeadless || exit 1

# 3. åŸ·è¡Œå»ºç½®
echo "ğŸ—ï¸ åŸ·è¡Œå»ºç½®..."
yarn build || exit 1

echo "âœ… Pre-push æª¢æŸ¥å®Œæˆï¼å¯ä»¥ push äº†ï¼"
