#!/bin/sh
. "$(dirname "$0")/_/husky.sh"
export NODE_OPTIONS="--max-old-space-size=4096"

echo "ğŸ” åŸ·è¡Œ Pre-commit æª¢æŸ¥..."

# 1. TypeScript é¡å‹æª¢æŸ¥
echo "ğŸ“ TypeScript é¡å‹æª¢æŸ¥..."
npx --no-install tsc -p tsconfig.app.json --noEmit || exit 1

# 2. Lint-staged (è‡ªå‹•ä¿®å¾© lint å•é¡Œ)
echo "ğŸ¨ Lint æª¢æŸ¥èˆ‡è‡ªå‹•ä¿®å¾©..."
npx --no-install lint-staged || exit 1

# 3. åŸ·è¡Œæ¸¬è©¦ (å¯é¸ - å–æ¶ˆè¨»è§£ä»¥å•Ÿç”¨)
# echo "ğŸ§ª åŸ·è¡Œæ¸¬è©¦..."
# yarn test --watch=false --browsers=ChromeHeadless || exit 1

# 4. åŸ·è¡Œå»ºç½® (å¯é¸ - å–æ¶ˆè¨»è§£ä»¥å•Ÿç”¨ï¼Œè¼ƒè€—æ™‚)
# echo "ğŸ—ï¸ åŸ·è¡Œå»ºç½®..."
# yarn build || exit 1

echo "âœ… Pre-commit æª¢æŸ¥å®Œæˆï¼"
