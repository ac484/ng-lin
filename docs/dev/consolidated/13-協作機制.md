# 協作機制

## 內部協作機制

### 多專業團隊協作

**工程專案的協作特性:**
```
項次 110: Frontend 機櫃安裝
  ├─ 吊裝專業: 機櫃搬運定位
  ├─ 機電專業: 內部設備組裝
  ├─ 配線專業: 配線施工
  ├─ 儀控專業: 測試調試
  └─ 驗收專業: 驗收交付
```

## 協作的 Event 模型

### 1. 任務交接 (Handover)

```
Event: TaskHandedOver
  fromTask: "task-110-A-01"  // 吊裝完成
  toTask: "task-110-A-02"     // 開始組裝
  fromTeam: "吊裝專業團隊"
  toTeam: "機電專業團隊"
  handoverNotes: "機櫃已定位,水平度 OK"
  handoverPhotos: ["photo-001.jpg"]
  handedOverBy: "張三"
  receivedBy: "李四"
  timestamp: "2024-03-15 12:00:00"
```

**交接檢查表:**
```
機櫃交接:
  □ 機櫃定位正確
  □ 水平度符合規範
  □ 固定螺絲已鎖緊
  □ 無外觀損傷
  □ 清潔完成
```

### 2. 協同作業 (Collaboration)

```
Event: TeamCollaborationStarted
  taskId: "task-110-A-03"
  primaryTeam: "配線專業"
  supportingTeams: ["機電專業", "儀控專業"]
  collaborationReason: "需要同時進行配線與測試"
  coordinator: "工地主管"
  timestamp: "2024-03-16 08:00:00"
```

**協同場景範例:**
```
場景 1: 配線與測試同步
  主要: 配線團隊施工
  支援: 儀控團隊同步測試訊號
  協調: 工地主管現場協調
  
場景 2: 機電與儀控整合
  主要: 機電設備安裝
  支援: 儀控配線準備
  協調: 專案經理統籌
```

### 3. 依賴等待 (Dependency)

```
Event: TaskDependencyBlocked
  waitingTask: "task-110-A-04"  // 測試任務
  dependsOn: "task-110-A-03"     // 配線任務
  blockReason: "配線未完成,無法開始測試"
  estimatedUnblockTime: "2024-03-17 14:00:00"
  notifiedTeam: "儀控專業"
  timestamp: "2024-03-17 09:00:00"
```

**依賴管理:**
```
自動通知:
  配線任務完成 → 通知儀控團隊可以開始
  阻擋發生 → 通知相關團隊調整計畫
  預計解除 → 提前通知準備資源
```

## 跨團隊協調案例

### 案例 1: 設備安裝協作

```
Task-001: 機櫃定位 [吊裝專業]
  完成後交接給
Task-002: 內部組裝 [機電專業]
  同時需要
Task-003: 配線準備 [配線專業]
  
Event Flow:
1. TaskCompleted (Task-001)
2. TaskHandedOver (吊裝 → 機電)
3. TaskStarted (Task-002)
4. TeamCollaborationStarted (機電+配線)
5. TaskCompleted (Task-002, Task-003)
```

### 案例 2: 問題協調處理

```
問題: SS-A01 配線發現設計錯誤

Event Flow:
1. IssueIdentified
   發現者: 配線專業
   問題: 配線路徑與設計圖不符
   
2. CrossTeamMeetingScheduled
   參與: 配線、設計、監造
   議題: 確認正確配線路徑
   
3. DesignChangeApproved
   決議: 修改配線路徑
   責任: 設計單位
   
4. TaskUpdated
   Task-003: 更新配線路徑
   預計延遲: 1 天
   
5. StakeholderNotified
   通知: 業主、監造單位
   原因: 設計變更
   影響: 輕微延遲
```

## 協作工具與機制

### 工具整合

**現場協作工具:**
```
- 即時通訊: 快速問題溝通
- 照片記錄: 現場狀況存證
- 位置定位: 確認工作位置
- 電子簽核: 交接確認
```

**系統整合:**
```
Event Bus:
  TaskCompleted → 自動通知下游團隊
  IssueRaised → 自動分派責任單位
  HandoverRequest → 自動發送交接通知
```

## 協作 SLA

**服務水準約定:**
```
- 任務交接: 2 小時內確認
- 問題回應: 4 小時內回覆
- 協作請求: 1 天內安排
```

## 總結

協作機制的關鍵:
1. **明確交接** - TaskHandedOver Event
2. **協同作業** - TeamCollaboration Event
3. **依賴管理** - 自動通知與協調
4. **完整記錄** - 所有協作都有 Event
5. **工具支援** - 系統自動化處理
